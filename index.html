<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React + TS</title>
    <script type="text/javascript" src="public/test27.loader.js" async="" data-status="loaded"></script>

  </head>
  <body>
    <canvas id="unity-canvas"></canvas>


    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script>
       

// Funkcja, która inicjuje UnityInstance


var here = null;




var myGameInstance = null;

//var loaderUrl = "/test27.loader.js";
//var unityInstance = instantiate("unityContainer", "public/YourGame.json");

//document.cookie = "myCat=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";

//var script = document.createElement('script');

//document.body.appendChild(script);




var yesOrNo = document.cookie.match(/^(.*;)?\s*myCat\s*=\s*[^;]+(.*)?$/)
localStorage.setItem('data', yesOrNo)


//console.log("YES:NO: "+yesOrNo);
function getCookie(name) {
  const value = `; ${document.cookie}`;
  const parts = value.split(`; ${name}=`);
  if (parts.length === 2) return here = parts.pop().split(';').shift();
  

}




getCookie("myCat");






document.addEventListener('DOMContentLoaded', function() {
    // Twój kod JavaScript z Unity
    console.log("1");
    if(yesOrNo != null){
    var canvas = document.getElementById('unity-canvas');
    var config = {
      loaderUrl: "public/test27.loader.js",
    dataUrl: "public/test27.data",
    frameworkUrl: "public/test27.framework.js",
    codeUrl: "public/test27.wasm",
      // ... ustawienia konfiguracyjne Unity ...
    };

    canvas.style.display = 'block';
    canvas.style.width = '720px';
    canvas.style.height = '1280px';



  
  createUnityInstance(canvas, config, (progress) => {
                // Obsługa postępu ładowania
                console.log("Progress: " + progress);
            }).then((unityInstance) => {
                // Przypisanie instancji do zmiennej myGameInstance
                myGameInstance = unityInstance;
              console.log("TESTTESTES");
              myGameInstance.SendMessage("getData", "GetRealWallet", here);

                // Wywołanie funkcji w Unity po zainicjowaniu instancji
               // sendToUnity("Hello from JavaScript!");
            });

      
          }
          })

        
    </script>


   
  </body>
</html>
